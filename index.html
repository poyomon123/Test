<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¹´í˜ ì˜ˆì•½ì£¼ë¬¸ ì‹œìŠ¤í…œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            max-width: 800px;
            width: 100%;
            padding: 40px;
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
            font-size: 28px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 500;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.2);
        }

        .menu-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .menu-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: white;
            border-radius: 8px;
            transition: all 0.3s ease;
            flex-wrap: wrap;
            gap: 10px;
        }

        .menu-item:hover {
            transform: translateX(5px);
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .menu-item input[type="number"] {
            width: 80px;
            text-align: center;
        }

        .menu-info {
            flex: 1;
            min-width: 150px;
        }

        .menu-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .order-type-mini {
            display: none;
            gap: 5px;
            align-items: center;
        }

        .order-type-mini.show {
            display: flex;
        }

        .order-type-mini-btn {
            padding: 6px 12px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            background: white;
            color: #666;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
            white-space: nowrap;
        }

        .order-type-mini-btn.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .order-type-mini-btn:hover {
            border-color: #667eea;
        }

        .quantity-control {
            display: flex;
            align-items: center;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            overflow: hidden;
        }

        .quantity-btn {
            width: 35px;
            height: 35px;
            border: none;
            background: #f0f0f0;
            color: #333;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quantity-btn:hover {
            background: #667eea;
            color: white;
        }

        .quantity-btn:active {
            transform: scale(0.95);
        }

        .quantity-control input[type="number"] {
            border: none;
            width: 60px;
            text-align: center;
            font-weight: 600;
            -moz-appearance: textfield;
        }

        .quantity-control input[type="number"]::-webkit-outer-spin-button,
        .quantity-control input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .menu-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .menu-price {
            color: #667eea;
            font-size: 14px;
        }

        .temperature-select {
            width: 100px;
            padding: 8px;
            font-size: 14px;
            display: none;
        }

        .temperature-select.show {
            display: block;
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
        }

        .submit-btn:active {
            transform: translateY(0);
        }

        .total-section {
            background: #f0f4ff;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            text-align: right;
        }

        .total-amount {
            font-size: 20px;
            font-weight: 600;
            color: #333;
        }

        .success-message {
            display: none;
            background: #4caf50;
            color: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin-top: 20px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .datetime-input {
            display: flex;
            gap: 10px;
        }

        .datetime-input input {
            flex: 1;
        }

        @media (max-width: 768px) {
            .menu-controls {
                width: 100%;
                justify-content: space-between;
            }
            
            .menu-info {
                width: 100%;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>â˜• ì¹´í˜ ì˜ˆì•½ì£¼ë¬¸</h1>
        
        <form id="reservationForm">
            <div class="form-group">
                <label for="customerName">ì´ë¦„ *</label>
                <input type="text" id="customerName" name="customerName" required placeholder="í™ê¸¸ë™">
            </div>

            <div class="form-group">
                <label for="customerPhone">ì—°ë½ì²˜ *</label>
                <input type="tel" id="customerPhone" name="customerPhone" required placeholder="010-1234-5678">
            </div>

            <div class="form-group">
                <label>í”½ì—… ë‚ ì§œ ë° ì‹œê°„ *</label>
                <div class="datetime-input">
                    <input type="date" id="pickupDate" name="pickupDate" required>
                    <input type="time" id="pickupTime" name="pickupTime" required min="09:00" max="21:00">
                </div>
            </div>

            <div class="menu-section">
                <h3 style="margin-bottom: 15px; color: #333;">ë©”ë‰´ ì„ íƒ</h3>
                
                <div class="menu-item">
                    <div class="menu-info">
                        <div class="menu-name">ì•„ë©”ë¦¬ì¹´ë…¸</div>
                        <div class="menu-price">4,500ì›</div>
                    </div>
                    <div class="menu-controls">
                        <div class="order-type-mini" id="americano-type">
                            <button type="button" class="order-type-mini-btn" data-menu="americano" data-type="dine-in">ğŸª‘ ë§¤ì¥</button>
                            <button type="button" class="order-type-mini-btn" data-menu="americano" data-type="takeout">ğŸ›ï¸ í¬ì¥</button>
                        </div>
                        <select class="temperature-select" id="americano-temp">
                            <option value="">ì„ íƒ</option>
                            <option value="ice">ì•„ì´ìŠ¤</option>
                            <option value="hot">í•«</option>
                        </select>
                        <div class="quantity-control">
                            <button type="button" class="quantity-btn minus" data-target="americano-qty">âˆ’</button>
                            <input type="number" class="menu-quantity" id="americano-qty" data-price="4500" data-name="ì•„ë©”ë¦¬ì¹´ë…¸" min="0" value="0" readonly>
                            <button type="button" class="quantity-btn plus" data-target="americano-qty">+</button>
                        </div>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="menu-info">
                        <div class="menu-name">ì¹´í˜ë¼ë–¼</div>
                        <div class="menu-price">5,000ì›</div>
                    </div>
                    <div class="menu-controls">
                        <div class="order-type-mini" id="latte-type">
                            <button type="button" class="order-type-mini-btn" data-menu="latte" data-type="dine-in">ğŸª‘ ë§¤ì¥</button>
                            <button type="button" class="order-type-mini-btn" data-menu="latte" data-type="takeout">ğŸ›ï¸ í¬ì¥</button>
                        </div>
                        <div class="quantity-control">
                            <button type="button" class="quantity-btn minus" data-target="latte-qty">âˆ’</button>
                            <input type="number" class="menu-quantity" id="latte-qty" data-price="5000" data-name="ì¹´í˜ë¼ë–¼" min="0" value="0" readonly>
                            <button type="button" class="quantity-btn plus" data-target="latte-qty">+</button>
                        </div>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="menu-info">
                        <div class="menu-name">ì¹´í‘¸ì¹˜ë…¸</div>
                        <div class="menu-price">5,000ì›</div>
                    </div>
                    <div class="menu-controls">
                        <div class="order-type-mini" id="cappuccino-type">
                            <button type="button" class="order-type-mini-btn" data-menu="cappuccino" data-type="dine-in">ğŸª‘ ë§¤ì¥</button>
                            <button type="button" class="order-type-mini-btn" data-menu="cappuccino" data-type="takeout">ğŸ›ï¸ í¬ì¥</button>
                        </div>
                        <div class="quantity-control">
                            <button type="button" class="quantity-btn minus" data-target="cappuccino-qty">âˆ’</button>
                            <input type="number" class="menu-quantity" id="cappuccino-qty" data-price="5000" data-name="ì¹´í‘¸ì¹˜ë…¸" min="0" value="0" readonly>
                            <button type="button" class="quantity-btn plus" data-target="cappuccino-qty">+</button>
                        </div>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="menu-info">
                        <div class="menu-name">ë°”ë‹ë¼ë¼ë–¼</div>
                        <div class="menu-price">5,500ì›</div>
                    </div>
                    <div class="menu-controls">
                        <div class="order-type-mini" id="vanilla-type">
                            <button type="button" class="order-type-mini-btn" data-menu="vanilla" data-type="dine-in">ğŸª‘ ë§¤ì¥</button>
                            <button type="button" class="order-type-mini-btn" data-menu="vanilla" data-type="takeout">ğŸ›ï¸ í¬ì¥</button>
                        </div>
                        <div class="quantity-control">
                            <button type="button" class="quantity-btn minus" data-target="vanilla-qty">âˆ’</button>
                            <input type="number" class="menu-quantity" id="vanilla-qty" data-price="5500" data-name="ë°”ë‹ë¼ë¼ë–¼" min="0" value="0" readonly>
                            <button type="button" class="quantity-btn plus" data-target="vanilla-qty">+</button>
                        </div>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="menu-info">
                        <div class="menu-name">ì¹´ë¼ë©œë§ˆí‚¤ì•„í† </div>
                        <div class="menu-price">6,000ì›</div>
                    </div>
                    <div class="menu-controls">
                        <div class="order-type-mini" id="caramel-type">
                            <button type="button" class="order-type-mini-btn" data-menu="caramel" data-type="dine-in">ğŸª‘ ë§¤ì¥</button>
                            <button type="button" class="order-type-mini-btn" data-menu="caramel" data-type="takeout">ğŸ›ï¸ í¬ì¥</button>
                        </div>
                        <div class="quantity-control">
                            <button type="button" class="quantity-btn minus" data-target="caramel-qty">âˆ’</button>
                            <input type="number" class="menu-quantity" id="caramel-qty" data-price="6000" data-name="ì¹´ë¼ë©œë§ˆí‚¤ì•„í† " min="0" value="0" readonly>
                            <button type="button" class="quantity-btn plus" data-target="caramel-qty">+</button>
                        </div>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="menu-info">
                        <div class="menu-name">ì•„ì´ìŠ¤í‹°</div>
                        <div class="menu-price">4,000ì›</div>
                    </div>
                    <div class="menu-controls">
                        <div class="order-type-mini" id="icetea-type">
                            <button type="button" class="order-type-mini-btn" data-menu="icetea" data-type="dine-in">ğŸª‘ ë§¤ì¥</button>
                            <button type="button" class="order-type-mini-btn" data-menu="icetea" data-type="takeout">ğŸ›ï¸ í¬ì¥</button>
                        </div>
                        <div class="quantity-control">
                            <button type="button" class="quantity-btn minus" data-target="icetea-qty">âˆ’</button>
                            <input type="number" class="menu-quantity" id="icetea-qty" data-price="4000" data-name="ì•„ì´ìŠ¤í‹°" min="0" value="0" readonly>
                            <button type="button" class="quantity-btn plus" data-target="icetea-qty">+</button>
                        </div>
                    </div>
                </div>

                <div class="menu-item">
                    <div class="menu-info">
                        <div class="menu-name">ìŠ¤ë¬´ë””</div>
                        <div class="menu-price">6,500ì›</div>
                    </div>
                    <div class="menu-controls">
                        <div class="order-type-mini" id="smoothie-type">
                            <button type="button" class="order-type-mini-btn" data-menu="smoothie" data-type="dine-in">ğŸª‘ ë§¤ì¥</button>
                            <button type="button" class="order-type-mini-btn" data-menu="smoothie" data-type="takeout">ğŸ›ï¸ í¬ì¥</button>
                        </div>
                        <div class="quantity-control">
                            <button type="button" class="quantity-btn minus" data-target="smoothie-qty">âˆ’</button>
                            <input type="number" class="menu-quantity" id="smoothie-qty" data-price="6500" data-name="ìŠ¤ë¬´ë””" min="0" value="0" readonly>
                            <button type="button" class="quantity-btn plus" data-target="smoothie-qty">+</button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label for="specialRequest">íŠ¹ë³„ ìš”ì²­ì‚¬í•­</label>
                <textarea id="specialRequest" name="specialRequest" rows="3" placeholder="ì˜ˆ: ì•„ì´ìŠ¤ ì ê²Œ, ìƒ· ì¶”ê°€ ë“±"></textarea>
            </div>

            <div class="total-section">
                <div class="total-amount">ì´ ê¸ˆì•¡: <span id="totalAmount">0</span>ì›</div>
            </div>

            <button type="submit" class="submit-btn">ì˜ˆì•½ ì£¼ë¬¸í•˜ê¸°</button>
        </form>

        <div class="success-message" id="successMessage">
            ì˜ˆì•½ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! í”½ì—… ì‹œê°„ì— ë§ì¶° ë°©ë¬¸í•´ì£¼ì„¸ìš”.
        </div>
    </div>

    <script>
        // ë©”ë‰´ë³„ ì£¼ë¬¸ íƒ€ì… ì €ì¥
        const menuOrderTypes = {};

        // ë§¤ì¥/í¬ì¥ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        document.querySelectorAll('.order-type-mini-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const menuName = this.dataset.menu;
                const orderType = this.dataset.type;
                
                // ê°™ì€ ë©”ë‰´ì˜ ë‹¤ë¥¸ ë²„íŠ¼ë“¤ì—ì„œ selected ì œê±°
                document.querySelectorAll(`[data-menu="${menuName}"]`).forEach(b => {
                    b.classList.remove('selected');
                });
                
                // í´ë¦­í•œ ë²„íŠ¼ì— selected ì¶”ê°€
                this.classList.add('selected');
                
                // ì£¼ë¬¸ íƒ€ì… ì €ì¥
                menuOrderTypes[menuName] = orderType;
            });
        });

        // +/- ë²„íŠ¼ ì´ë²¤íŠ¸ ì²˜ë¦¬
        document.querySelectorAll('.quantity-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const targetId = this.dataset.target;
                const input = document.getElementById(targetId);
                let currentValue = parseInt(input.value) || 0;
                
                if (this.classList.contains('plus')) {
                    currentValue++;
                } else if (this.classList.contains('minus') && currentValue > 0) {
                    currentValue--;
                }
                
                input.value = currentValue;
                
                // ë©”ë‰´ ì´ë¦„ ì¶”ì¶œ (ì˜ˆ: americano-qty -> americano)
                const menuName = targetId.replace('-qty', '');
                
                // ë§¤ì¥/í¬ì¥ ì„ íƒ ë²„íŠ¼ í‘œì‹œ/ìˆ¨ê¹€
                const orderTypeDiv = document.getElementById(`${menuName}-type`);
                if (currentValue > 0) {
                    orderTypeDiv.classList.add('show');
                    // ê¸°ë³¸ê°’ìœ¼ë¡œ ë§¤ì¥ ì„ íƒ
                    if (!menuOrderTypes[menuName]) {
                        const dineInBtn = orderTypeDiv.querySelector('[data-type="dine-in"]');
                        dineInBtn.click();
                    }
                } else {
                    orderTypeDiv.classList.remove('show');
                    delete menuOrderTypes[menuName];
                }
                
                // ì•„ë©”ë¦¬ì¹´ë…¸ì˜ ê²½ìš° ì˜¨ë„ ì„ íƒë„ í‘œì‹œ/ìˆ¨ê¹€
                if (menuName === 'americano') {
                    const tempSelect = document.getElementById('americano-temp');
                    if (currentValue > 0) {
                        tempSelect.classList.add('show');
                        tempSelect.required = true;
                    } else {
                        tempSelect.classList.remove('show');
                        tempSelect.required = false;
                        tempSelect.value = '';
                    }
                }
                
                calculateTotal();
            });
        });

        // ì´ ê¸ˆì•¡ ê³„ì‚°
        function calculateTotal() {
            let total = 0;
            const quantities = document.querySelectorAll('.menu-quantity');
            
            quantities.forEach(input => {
                const price = parseInt(input.dataset.price);
                const quantity = parseInt(input.value) || 0;
                total += price * quantity;
            });
            
            document.getElementById('totalAmount').textContent = total.toLocaleString();
        }

        // ì˜¤ëŠ˜ ë‚ ì§œë¥¼ ìµœì†Œê°’ìœ¼ë¡œ ì„¤ì •
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('pickupDate').min = today;

        // í¼ ì œì¶œ ì²˜ë¦¬
        document.getElementById('reservationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // ì£¼ë¬¸ ë‚´ì—­ ìˆ˜ì§‘
            const orderItems = [];
            document.querySelectorAll('.menu-quantity').forEach(input => {
                const quantity = parseInt(input.value) || 0;
                if (quantity > 0) {
                    const menuName = input.id.replace('-qty', '');
                    
                    // ë§¤ì¥/í¬ì¥ ì„ íƒ í™•ì¸
                    if (!menuOrderTypes[menuName]) {
                        alert(`${input.dataset.name}ì˜ ë§¤ì¥/í¬ì¥ì„ ì„ íƒí•´ì£¼ì„¸ìš”.`);
                        return;
                    }
                    
                    const item = {
                        name: input.dataset.name,
                        quantity: quantity,
                        price: parseInt(input.dataset.price),
                        orderType: menuOrderTypes[menuName] === 'dine-in' ? 'ë§¤ì¥' : 'í¬ì¥'
                    };
                    
                    // ì•„ë©”ë¦¬ì¹´ë…¸ì¸ ê²½ìš° ì˜¨ë„ ì¶”ê°€
                    if (menuName === 'americano') {
                        const temp = document.getElementById('americano-temp').value;
                        if (!temp) {
                            alert('ì•„ë©”ë¦¬ì¹´ë…¸ì˜ ì˜¨ë„ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                            return;
                        }
                        item.temperature = temp === 'ice' ? 'ì•„ì´ìŠ¤' : 'í•«';
                    }
                    
                    orderItems.push(item);
                }
            });

            if (orderItems.length === 0) {
                alert('ìµœì†Œ 1ê°œ ì´ìƒì˜ ë©”ë‰´ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            // ì£¼ë¬¸ ì •ë³´ ìˆ˜ì§‘
            const orderData = {
                customerName: document.getElementById('customerName').value,
                customerPhone: document.getElementById('customerPhone').value,
                pickupDate: document.getElementById('pickupDate').value,
                pickupTime: document.getElementById('pickupTime').value,
                items: orderItems,
                specialRequest: document.getElementById('specialRequest').value,
                totalAmount: parseInt(document.getElementById('totalAmount').textContent.replace(/,/g, ''))
            };

            // ì‹¤ì œë¡œëŠ” ì„œë²„ë¡œ ì „ì†¡í•˜ê² ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” ì½˜ì†”ì— ì¶œë ¥
            console.log('ì£¼ë¬¸ ì •ë³´:', orderData);

            // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
            document.getElementById('successMessage').style.display = 'block';
            
            // í¼ ì´ˆê¸°í™”
            setTimeout(() => {
                this.reset();
                document.querySelectorAll('.order-type-mini').forEach(div => {
                    div.classList.remove('show');
                });
                document.querySelectorAll('.order-type-mini-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                document.getElementById('americano-temp').classList.remove('show');
                calculateTotal();
                document.getElementById('successMessage').style.display = 'none';
                // ì£¼ë¬¸ íƒ€ì… ì´ˆê¸°í™”
                for (let key in menuOrderTypes) {
                    delete menuOrderTypes[key];
                }
            }, 3000);
        });
    </script>
</body>
</html>
